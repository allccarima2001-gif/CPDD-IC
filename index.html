<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPDD-IC - Cuestionario Dermatolog√≠a UNMSM</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #003366 0%, #004d99 100%); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; }
        .container { background: white; border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); max-width: 900px; width: 100%; padding: 40px; }
        h1 { color: #003366; margin-bottom: 20px; font-size: 28px; }
        h2 { color: #003366; margin: 20px 0 15px 0; font-size: 20px; }
        p { color: #666; margin-bottom: 15px; line-height: 1.6; }
        .form-group { margin-bottom: 20px; }
        label { display: block; color: #003366; font-weight: bold; margin-bottom: 8px; }
        input[type="number"], input[type="text"], select { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-size: 14px; }
        input[type="number"]:focus, input[type="text"]:focus, select:focus { outline: none; border-color: #003366; }
        .radio-group { display: flex; gap: 20px; margin-top: 10px; }
        button { padding: 12px 30px; font-size: 14px; border: none; border-radius: 5px; cursor: pointer; background: #003366; color: white; font-weight: bold; transition: all 0.3s; }
        button:hover { background: #004d99; transform: translateY(-2px); }
        .btn-anterior { background: #666; }
        .btn-anterior:hover { background: #444; }
        .error { color: red; font-size: 12px; }
        .hidden { display: none !important; }
        .image-container { text-align: center; margin: 30px 0; }
        .image-container img { max-width: 100%; max-height: 500px; border-radius: 10px; border: 3px solid #003366; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .progress-bar { width: 100%; height: 10px; background: #e0e0e0; border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #003366, #004d99); transition: width 0.3s; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        table th, table td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        table th { background: #003366; color: white; }
        table tr:nth-child(even) { background: #f9f9f9; }
        .buttons { display: flex; gap: 10px; margin-top: 20px; }
        .buttons button { flex: 1; }
        .summary-box { background: #f0f4f8; padding: 20px; border-radius: 10px; margin-bottom: 20px; border-left: 5px solid #003366; }
        .summary-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #ddd; }
        .summary-item:last-child { border-bottom: none; }
        .precision-value { font-size: 32px; font-weight: bold; color: #003366; }
    </style>
</head>
<body>
    <div class="container">
        <!-- P√ÅGINA 1: INICIO -->
        <div id="page-inicio">
            <h1>Cuestionario CPDD-IC</h1>
            <p style="font-size: 16px;">Precisi√≥n Diagn√≥stica en Dermatolog√≠a mediante Im√°genes Cl√≠nicas</p>
            <p><strong>Universidad Nacional Mayor de San Marcos</strong></p>
            <p style="margin-top: 30px; font-style: italic; color: #555;">Este cuestionario eval√∫a tu capacidad diagn√≥stica en dermatolog√≠a. Consta de 15 preguntas y dura aproximadamente 25-30 minutos.</p>
            <button onclick="irA('demo')" style="margin-top: 20px;">Comenzar ‚Üí</button>
        </div>

        <!-- P√ÅGINA 2: DATOS DEMOGR√ÅFICOS -->
        <div id="page-demo" class="hidden">
            <h2>Datos Demogr√°ficos</h2>
            
            <div class="form-group">
                <label>Edad (a√±os):</label>
                <input type="number" id="edad" min="18" max="60" placeholder="Ej: 24">
                <div id="error-edad" class="error"></div>
            </div>
            
            <div class="form-group">
                <label>Sexo biol√≥gico:</label>
                <div class="radio-group">
                    <div style="display: flex; align-items: center;">
                        <input type="radio" name="sexo" value="Masculino" id="sexo-m">
                        <label for="sexo-m" style="margin: 0; margin-left: 5px;">Masculino</label>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <input type="radio" name="sexo" value="Femenino" id="sexo-f">
                        <label for="sexo-f" style="margin: 0; margin-left: 5px;">Femenino</label>
                    </div>
                </div>
                <div id="error-sexo" class="error"></div>
            </div>
            
            <div class="form-group">
                <label>Instituci√≥n donde realiza el internado:</label>
                <select id="institucion">
                    <option value="">-- Selecciona una opci√≥n --</option>
                    <option value="MINSA">MINSA (Ministerio de Salud)</option>
                    <option value="EsSalud">EsSalud (Seguro Social)</option>
                    <option value="Fuerzas Armadas">Fuerzas Armadas y Policiales</option>
                    <option value="Privadas">Cl√≠nicas privadas</option>
                </select>
                <div id="error-institucion" class="error"></div>
            </div>
            
            <button onclick="validarDemo()">Siguiente ‚Üí</button>
        </div>

        <!-- P√ÅGINAS DE PREGUNTAS (se crean autom√°ticamente) -->
        <div id="preguntas"></div>

        <!-- P√ÅGINA FINAL: RESUMEN -->
        <div id="page-resumen" class="hidden">
            <h2>üìä Resultados Finales</h2>
            <div id="resumen-content"></div>
        </div>
    </div>

    <script>
        // ‚ö†Ô∏è REEMPLAZA AQUI TU URL DE GOOGLE APPS SCRIPT
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz1eJOHZICBl1IcJDKdpMpgTL0v0X4vFM6iaZShNyTN8dV5eFrnlJTVHwJGl4BV_8rv/exec';

        // CONFIGURACI√ìN - PREGUNTAS CON IM√ÅGENES
        // Despu√©s de subir im√°genes a GitHub, reemplaza los links abajo
        const preguntas = [
            { num: 1, correcto: "Dermatitis de contacto al√©rgica", imagen: "Dermatitis de contacto.jpg" },
            { num: 2, correcto: "Dermatitis at√≥pica", imagen: "Dermatitis at√≥pica.jpg" },
            { num: 3, correcto: "Queratosis seborreica", imagen: "Queratosis seborreica.jpg" },
            { num: 4, correcto: "Imp√©tigo no bulloso", imagen: "Imp√©tigo.jpg" },
            { num: 5, correcto: "Psoriasis", imagen: "Psoriasis.jpg" },
            { num: 6, correcto: "Melanoma", imagen: "Melanoma.jpg" }, 
            { num: 7, correcto: "Acn√© vulgar", imagen: "Acn√©.jpg" },
            { num: 8, correcto: "Verruga vulgar", imagen: "Verruga vulgar.jpg" },
            { num: 9, correcto: "Ros√°cea", imagen: "Ros√°cea.jpg" },
            { num: 10, correcto: "Ti√±a corporis", imagen: "Ti√±a corporis.jpg" },
            { num: 11, correcto: "Carcinoma basocelular", imagen: "Carcinoma basocelular.jpg" }, 
            { num: 12, correcto: "Nevo melanoc√≠tico com√∫n", imagen: "Nevus.jpeg" }
            { num: 13, correcto: "Lentigo solar", imagen: "Lentigo solar.jpg" },
            { num: 14, correcto: "Queratosis act√≠nica", imagen: "Queratosis act√≠nica.jpg" },
            { num: 15, correcto: "Molusco contagioso", imagen: "Molusco contagioso.jpg" }
        ];

        const opciones = [
            "Acn√© vulgar",
            "Carcinoma basocelular",
            "Dermatitis at√≥pica",
            "Dermatitis de contacto al√©rgica",
            "Imp√©tigo no bulloso",
            "Lentigo solar",
            "Melanoma",
            "Molusco contagioso",
            "Nevo melanoc√≠tico com√∫n",
            "Psoriasis",
            "Queratosis act√≠nica",
            "Queratosis seborreica",
            "Ros√°cea",
            "Ti√±a corporis",
            "Verruga vulgar"
        ];

        let datos = { respuestas: {} };

        // Crear p√°ginas de preguntas
        window.onload = function() {
            const container = document.getElementById('preguntas');
            preguntas.forEach(p => {
                const div = document.createElement('div');
                div.id = `page-p${p.num}`;
                div.className = 'hidden';
                div.innerHTML = `
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${(p.num/15)*100}%"></div>
                    </div>
                    <h2>Pregunta ${p.num} de 15</h2>
                    <p style="margin-bottom: 20px;">Observe la imagen y seleccione el diagn√≥stico m√°s probable:</p>
                    <div class="image-container">
                        <img src="${p.imagen}" alt="Imagen cl√≠nica - Pregunta ${p.num}" onerror="this.src='https://via.placeholder.com/600x400?text=Error+imagen'">
                    </div>
                    <div class="form-group">
                        <label>Selecciona el diagn√≥stico:</label>
                        <select id="resp${p.num}">
                            <option value="">-- Selecciona una opci√≥n --</option>
                            ${opciones.map(o => `<option value="${o}">${o}</option>`).join('')}
                        </select>
                        <div id="error${p.num}" class="error"></div>
                    </div>
                    <div class="buttons">
                        ${p.num > 1 ? `<button class="btn-anterior" onclick="irA('p${p.num-1}')">‚Üê Anterior</button>` : '<div></div>'}
                        <button onclick="siguiente(${p.num}, ${p.num === 15})">
                            ${p.num === 15 ? '‚úì Finalizar' : 'Siguiente ‚Üí'}
                        </button>
                    </div>
                `;
                container.appendChild(div);
            });
        };

        function irA(pagina) {
            document.querySelectorAll('[id^="page-"]').forEach(p => p.classList.add('hidden'));
            document.getElementById('page-' + pagina).classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        function validarDemo() {
            const edad = document.getElementById('edad').value;
            const sexo = document.querySelector('input[name="sexo"]:checked');
            const institucion = document.getElementById('institucion').value;

            document.getElementById('error-edad').textContent = '';
            document.getElementById('error-sexo').textContent = '';
            document.getElementById('error-institucion').textContent = '';

            if (!edad || edad < 18 || edad > 60) {
                document.getElementById('error-edad').textContent = '‚ö†Ô∏è Edad debe estar entre 18-60 a√±os';
                return;
            }
            if (!sexo) {
                document.getElementById('error-sexo').textContent = '‚ö†Ô∏è Selecciona tu sexo';
                return;
            }
            if (!institucion) {
                document.getElementById('error-institucion').textContent = '‚ö†Ô∏è Selecciona tu instituci√≥n';
                return;
            }

            datos.edad = edad;
            datos.sexo = sexo.value;
            datos.institucion = institucion;

            irA('p1');
        }

        function siguiente(num, esFinal) {
            const resp = document.getElementById('resp' + num).value;
            if (!resp) {
                document.getElementById('error' + num).textContent = '‚ö†Ô∏è Debes seleccionar un diagn√≥stico';
                return;
            }
            
            datos.respuestas[num] = resp;

            if (esFinal) {
                calcular();
                mostrarResumen();
                irA('resumen');
            } else {
                irA('p' + (num + 1));
            }
        }

        function calcular() {
            let correctas = 0;
            preguntas.forEach(p => {
                if (datos.respuestas[p.num] === p.correcto) correctas++;
            });
            datos.correctas = correctas;
            datos.precision = Math.round((correctas / 15) * 100);
        }

        function mostrarResumen() {
            let tabla = '<table><tr><th>P</th><th>Tu respuesta</th><th>Respuesta correcta</th><th>Resultado</th></tr>';
            preguntas.forEach(p => {
                const tuResp = datos.respuestas[p.num] || '--';
                const es = tuResp === p.correcto;
                tabla += `<tr><td>P${p.num}</td><td>${tuResp}</td><td>${p.correcto}</td><td style="color: ${es ? 'green' : 'red'}; font-weight: bold;">${es ? '‚úì Correcto' : '‚úó Incorrecto'}</td></tr>`;
            });
            tabla += '</table>';

            document.getElementById('resumen-content').innerHTML = `
                <div class="summary-box">
                    <div class="summary-item">
                        <span><strong>Respuestas correctas:</strong></span>
                        <span>${datos.correctas} / 15</span>
                    </div>
                    <div class="summary-item">
                        <span><strong>Respuestas incorrectas:</strong></span>
                        <span>${15 - datos.correctas} / 15</span>
                    </div>
                    <div class="summary-item" style="border: none; padding-top: 15px; margin-top: 15px; border-top: 2px solid #003366;">
                        <span><strong>Precisi√≥n Global:</strong></span>
                        <span class="precision-value">${datos.precision}%</span>
                    </div>
                </div>
                <h3 style="margin-top: 30px; margin-bottom: 15px;">Detalle de respuestas:</h3>
                ${tabla}
                <p style="margin-top: 30px; color: #555;">¬°Gracias por completar el cuestionario!</p>
            `;
        }
    </script>
</body>
</html>
